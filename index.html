<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Froll.org - Swap & Play</title>

    <!-- Logo cho tr√¨nh duy·ªát -->
    <link rel="icon" type="image/png" href="images/logo64.png">

    <!-- K·∫øt n·ªëi CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
<!-- G√ìI TO√ÄN B·ªò TRANG HOME -->
<div id="home-page">

    <!-- Thanh ƒëi·ªÅu h∆∞·ªõng (Hi·ªÉn th·ªã gi√° FROLL) -->
    <nav>
        <div class="nav-left">
            <img src="images/logo128.png" alt="Lottery Logo" class="nav-logo">
        </div>

        <div class="price">
            <span id="froll-price">1 FROLL = Loading... USD</span>
        </div>
    </nav>

    <!-- Khu v·ª±c Trade FROLL -->
    <section id="trade-froll-section">
        <button id="trade-froll-btn" class="button">Swap FROLL/VIC üî•</button>
    </section>

    <!-- Swap Interface -->
    <div id="swap-interface" class="interface hidden">
        <!-- Header: Hi·ªÉn th·ªã ƒë·ªãa ch·ªâ v√≠ -->
        <header class="swap-header">
            <button id="disconnect-wallet" class="button">Disconnect Wallet</button>
            <div id="wallet-address" class="wallet-address">Not Connected</div>
        </header>

        <!-- Ti√™u ƒë·ªÅ Swap -->
        <h1>Swap</h1>

        <!-- Swap Container -->
        <div class="swap-wrapper">
            <!-- From Token (VIC / FROLL) -->
            <div class="token-input">
                <p class="token-symbol" id="from-token-symbol">VIC</p>
                <div class="token-info">
                    <img id="from-token-logo" src="images/vic24.png" alt="VIC Token">
                    <p><span id="from-balance">0.0000</span></p>
                    <button id="max-button" class="button">Max</button>
                </div>
                <input type="number" id="from-amount" placeholder="0.0">
            </div>

            <!-- Swap Direction (‚ÜîÔ∏è) -->
            <button id="swap-direction" class="swap-direction">‚ÜîÔ∏è</button>

            <!-- To Token (FROLL / VIC) -->
            <div class="token-input">
                <p class="token-symbol" id="to-token-symbol">FROLL</p>
                <div class="token-info">
                    <img id="to-token-logo" src="images/froll24.png" alt="FROLL Token">
                    <p><span id="to-balance">0.0000</span></p>
                </div>
                <input type="text" id="to-amount" placeholder="0.0" disabled>
            </div>
        </div>

        <!-- Swap Details -->
        <div class="swap-details">
            <p id="transaction-fee">Transaction Fee: 0.01 VIC</p>
            <p id="gas-fee">Estimated Gas Fee: ~0.000029 VIC</p>
        </div>

        <!-- Swap Button -->
        <button id="swap-now" class="button">Swap Now</button>
    </div>

</div>

<!-- JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
<script src="js/countdown.js" defer></script>
<script type="module" src="/js/app.js"></script>

<script>
    // üìå URL Binance API ƒë·ªÉ l·∫•y gi√° VIC theo USD
    const BINANCE_API_URL = "https://api.binance.com/api/v3/ticker/price?symbol=VICUSDT";

    // üîÑ H√†m c·∫≠p nh·∫≠t gi√° FROLL
    async function updateFrollPrice() {
        try {
            const response = await fetch(BINANCE_API_URL);
            const data = await response.json();

            if (!data || !data.price) {
                throw new Error("Kh√¥ng l·∫•y ƒë∆∞·ª£c gi√° VIC t·ª´ Binance API");
            }

            const vicPrice = parseFloat(data.price); // Gi√° VIC theo USD
            const frollPrice = vicPrice * 100; // 1 FROLL = 100 VIC

            // Hi·ªÉn th·ªã gi√° tr√™n thanh ƒëi·ªÅu h∆∞·ªõng
            document.getElementById("froll-price").textContent = `1 FROLL = ${frollPrice.toFixed(2)} USD`;
        } catch (error) {
            console.error("‚ùå L·ªói khi c·∫≠p nh·∫≠t gi√° FROLL:", error);
            document.getElementById("froll-price").textContent = "Price unavailable";
        }
    }

    // üöÄ G·ªçi ngay khi trang t·∫£i
    document.addEventListener("DOMContentLoaded", updateFrollPrice);

    // üîÑ C·∫≠p nh·∫≠t m·ªói 60 gi√¢y
    setInterval(updateFrollPrice, 60000);
</script>

</body>
</html>
