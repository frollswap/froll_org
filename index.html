<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FROLL.ORG</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.8.1/dist/ethers.umd.min.js"></script>
</head>
<body>
  <div class="main-container">
    <!-- Header -->
    <header class="header">
      <img src="logo.png" alt="FROLL Logo" class="logo" />
      <div class="price-display" id="priceDisplay">Loading price...</div>
    </header>

    <!-- Main Buttons -->
    <div id="main-interface" class="main-interface">
      <h1>Welcome to FROLL.ORG</h1>
      <button onclick="showSwap()">Swap FROLL/VIC</button>
      <button onclick="showDice()">Play Dice Now</button>
    </div>

    <!-- Instructions -->
    <div class="instructions">
      <h2>How to Get Started</h2>
      <ul>
        <li>ü¶ä Use <strong>MetaMask</strong> or <strong>Viction Wallet</strong> (on mobile, open this site in wallet browser)</li>
        <li>üåê Add <strong>Viction Network</strong> RPC:
          <button onclick="copyToClipboard('https://rpc.viction.xyz')">Copy RPC</button>
        </li>
        <li>‚ûï Add FROLL token to wallet:
          <button onclick="addFrollToken()">Add to MetaMask</button>
        </li>
        <li>üí± Swap VIC ‚áÑ FROLL easily via this site</li>
        <li>üé≤ Play Dice ‚Äì Fully on-chain and transparent</li>
      </ul>
    </div>

    <!-- Community Links -->
    <div class="community-links">
      <a href="https://t.me/FortuneRolls" target="_blank">Telegram</a>
      <a href="https://twitter.com/FrollToken" target="_blank">Twitter</a>
      <a href="https://facebook.com/FrollOfficial" target="_blank">Facebook</a>
    </div>

    <!-- Swap Interface -->
    <div id="swap-interface" class="hidden">
      <h2>Swap FROLL ‚áÑ VIC</h2>
      <div class="swap-box">
        <label for="swapDirection">Swap Direction:</label>
        <select id="swapDirection" onchange="updateSwapUI()">
          <option value="vicToFroll">VIC ‚Üí FROLL</option>
          <option value="frollToVic">FROLL ‚Üí VIC</option>
        </select>

        <input type="number" id="swapAmount" placeholder="Enter amount" />
        <button onclick="doSwap()">Swap</button>
        <p id="swapStatus"></p>
      </div>
    </div>

    <!-- Dice Interface -->
    <div id="dice-interface" class="hidden">
      <h2>Play Dice (Ch·∫µn / L·∫ª)</h2>
      <div class="dice-box">
        <label for="minBet">Choose Table (Min Bet):</label>
        <input type="number" id="minBet" value="1" min="1" />
        <div class="dice-actions">
          <button onclick="joinTable()">Join Table</button>
        </div>
        <div id="bet-section" class="hidden">
          <div class="bet-buttons">
            <button onclick="placeBet('even')">Bet Even</button>
            <button onclick="placeBet('odd')">Bet Odd</button>
          </div>
          <div class="dice-actions">
            <button onclick="repeatBet()">Repeat</button>
            <button onclick="doubleBet()">Double</button>
            <button onclick="clearBet()">Clear</button>
            <button onclick="changeTable()">Change Table</button>
          </div>
        </div>
        <p id="diceStatus"></p>
      </div>
    </div>

    <!-- Connect Wallet -->
    <div class="wallet-connect">
      <button onclick="connectWallet()">Connect Wallet</button>
      <p id="walletAddress"></p>
    </div>
  </div>

  <!-- Scripts -->
  <script src="app.js"></script>
  <script>
    function copyToClipboard(text) {
      navigator.clipboard.writeText(text).then(() => {
        alert("Copied to clipboard!");
      });
    }

    async function addFrollToken() {
      try {
        await window.ethereum.request({
          method: 'wallet_watchAsset',
          params: {
            type: 'ERC20',
            options: {
              address: '0xB4d562A8f811CE7F134a1982992Bd153902290BC',
              symbol: 'FROLL',
              decimals: 18,
              image: 'https://froll.org/logo.png'
            },
          },
        });
      } catch (error) {
        console.error("Failed to add token:", error);
      }
    }
  </script>
</body>
</html>
